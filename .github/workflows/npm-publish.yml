# name: Publish Package to NPM

# on:
#   release:
#     types: [published]

# jobs:
#   build:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v4
#       - uses: actions/setup-node@v4
#         with:
#           node-version: '20.x'
#           registry-url: 'https://registry.npmjs.org'
#       - run: npm ci
#       - run: npm run build
#       - run: npm run lint

#   publish-npm:
#     needs: build
#     runs-on: ubuntu-latest
#     permissions:
#       id-token: write
#       contents: read
#     steps:
#       - uses: actions/checkout@v4
      
#       - name: Extract version from tag
#         id: get_version
#         run: |
#           VERSION=${GITHUB_REF#refs/tags/}
#           # Remove 'v' prefix if present
#           VERSION=${VERSION#v}
#           echo "VERSION=$VERSION" >> $GITHUB_ENV
#           echo "Using version $VERSION from release tag"
          
#       - name: Update package version
#         run: |
#           # Update version in package.json
#           npm version $VERSION --no-git-tag-version --allow-same-version
          
#       - uses: actions/setup-node@v4
#         with:
#           node-version: '20.x'
#           registry-url: 'https://registry.npmjs.org'
          
#       - run: npm ci
#       - run: npm run build
      
#       - name: Publish to NPM
#         run: npm publish --provenance
#         env:
#           NODE_AUTH_TOKEN: ${{secrets.NPM_TOKEN}}